{
  "gitSyncId": "68f95f221126eb768730abe4_cb79f0f2-2a89-4b88-922c-fe56c5349d10",
  "id": "Pedidos_addDocumentoInterno",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "WITH file_vars AS (\n  SELECT\n    '{{ appsmith.store.tempFile.name }}' AS file_name,\n    'documentos_internos/{{ appsmith.store.currentPedidoId }}/{{ encodeURIComponent(appsmith.store.tempFile.name) }}' AS file_path,\n    '{{ appsmith.store.tempFile.type }}' AS file_type\n)\n\nUPDATE public.pedidos\nSET documentos_internos = \n    COALESCE(documentos_internos, '[]'::jsonb) || \n    jsonb_build_object(\n        'nombre_archivo', (SELECT file_name FROM file_vars),\n        'path', (SELECT file_path FROM file_vars),\n        'tipo', (SELECT file_type FROM file_vars),\n        'fecha_carga', NOW()\n    )\nWHERE id = {{ appsmith.store.currentPedidoId }};",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": false
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "Prox_Pedidos",
      "isAutoGenerated": false,
      "name": "Prox_Pedidos",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "addDocumentoInterno",
    "pageId": "Pedidos",
    "runBehaviour": "MANUAL",
    "userSetOnLoad": false
  }
}